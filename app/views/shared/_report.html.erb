<%= turbo_frame_tag "my_form" do %>
  <button
    type="button"
    class="inline-flex items-center gap-2 px-6 sm:px-8 py-3 bg-red-100 hover:bg-red-200 hover:scale-[1.05] text-red-700 transition-all duration-300 text-base sm:text-lg 2xl:text-xl rounded-lg font-medium cursor-pointer"
    onclick='event.stopPropagation(); document.getElementById(<%= "report-modal-#{suspect.class.name.downcase}-#{suspect.id}".to_json %>).showModal();'
    title="Report this project for suspicious activity">
    ðŸš©
  </button>

  <dialog id="report-modal-<%= suspect.class.name.downcase %>-<%= suspect.id %>" class="modal backdrop:bg-black backdrop:bg-opacity-50">
    <div class="organic-card p-6 max-w-md w-full mx-4">
      <h3 class="font-bold text-lg mb-4 text-amber-900">Report <%= suspect.class.name.downcase %></h3>
      <p class="text-sm text-amber-700 mb-6">Help us keep the voting pool clean by reporting projects that violate our community standards.</p>
      <%= form_with url: fraud_reports_path, method: :post, class: "space-y-4" do |f| %>
        <%= f.hidden_field "fraud_report[suspect_type]", value: suspect.class.name %>
        <%= f.hidden_field "fraud_report[suspect_id]", value: suspect.id %>
        <div class="space-y-3">
          <label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-amber-50 transition-colors">
            <%= f.radio_button "fraud_report[reason]", "inappropriate_content", class: "w-4 h-4 text-red-600 border-2 border-amber-600 focus:ring-red-500" %>
            <span class="text-sm text-amber-900">Did not declare AI help</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-amber-50 transition-colors">
            <%= f.radio_button "fraud_report[reason]", "spam", class: "w-4 h-4 text-red-600 border-2 border-amber-600 focus:ring-red-500" %>
            <span class="text-sm text-amber-900">Spam or promotional content</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-amber-50 transition-colors">
            <%= f.radio_button "fraud_report[reason]", "fake_project", class: "w-4 h-4 text-red-600 border-2 border-amber-600 focus:ring-red-500" %>
            <span class="text-sm text-amber-900">Fake or misleading project</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-amber-50 transition-colors">
            <%= f.radio_button "fraud_report[reason]", "plagiarism", class: "w-4 h-4 text-red-600 border-2 border-amber-600 focus:ring-red-500" %>
            <span class="text-sm text-amber-900">Plagiarism or stolen content</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-amber-50 transition-colors">
            <%= f.radio_button "fraud_report[reason]", "other", class: "w-4 h-4 text-red-600 border-2 border-amber-600 focus:ring-red-500" %>
            <span class="text-sm text-amber-900">Other</span>
          </label>
        </div>

        <div class="flex gap-3 pt-4">
          <button type="button" class="marble-button bg-gray-200 text-gray-700 hover:bg-gray-300 flex-1" onclick="document.getElementById(<%= "report-modal-#{suspect.class.name.downcase}-#{suspect.id}".to_json %>).close()">
            Cancel
          </button>
          <%= f.submit "Submit Report", class: "marble-button bg-red-600 text-white hover:bg-red-700 flex-1" %>
        </div>
      <% end %>
    </div>
  </dialog>
<% end %>
