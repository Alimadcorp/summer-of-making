<%= turbo_frame_tag "my_form" do %>
  <button
    type="button"
    class="inline-flex items-center gap-2 px-6 sm:px-8 py-3 bg-red-100 hover:bg-red-200 hover:scale-[1.05] text-red-700 transition-all duration-300 text-base sm:text-lg 2xl:text-xl rounded-lg font-medium cursor-pointer"
    onclick='event.stopPropagation(); document.getElementById(<%= "report-modal-#{suspect.class.name.downcase}-#{suspect.id}".to_json %>).showModal();'
    title="Report this project for suspicious activity">
    ðŸš©
  </button>

  <dialog id="report-modal-<%= suspect.class.name.downcase %>-<%= suspect.id %>" class="modal p-0 rounded-lg backdrop:bg-black backdrop:bg-opacity-50">
    <div class="modal-box bg-white p-6 rounded-lg max-w-md w-full">
      <h3 class="font-bold text-lg mb-4">Report <%= suspect.class.name.downcase %></h3>
      <p class="text-sm text-gray-600 mb-6">Help us keep the voting pool clean by reporting projects that </p>
      <%= form_with url: fraud_reports_path, method: :post, class: "space-y-4" do |f| %>
        <%= f.hidden_field "fraud_report[suspect_type]", value: suspect.class.name %>
        <%= f.hidden_field "fraud_report[suspect_id]", value: suspect.id %>
        <div class="space-y-3">
          <label class="flex items-center space-x-3 cursor-pointer">
            <%= f.radio_button "fraud_report[reason]", "inappropriate_content", class: "radio radio-sm radio-error" %>
            <span class="text-sm">Did not declare AI help</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer">
            <%= f.radio_button "fraud_report[reason]", "spam", class: "radio radio-sm radio-error" %>
            <span class="text-sm">Spam or promotional content</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer">
            <%= f.radio_button "fraud_report[reason]", "fake_project", class: "radio radio-sm radio-error" %>
            <span class="text-sm">Fake or misleading project</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer">
            <%= f.radio_button "fraud_report[reason]", "plagiarism", class: "radio radio-sm radio-error" %>
            <span class="text-sm">Plagiarism or stolen content</span>
          </label>
          <label class="flex items-center space-x-3 cursor-pointer">
            <%= f.radio_button "fraud_report[reason]", "other", class: "radio radio-sm radio-error" %>
            <span class="text-sm">Other</span>
          </label>
        </div>

        <div class="modal-action pt-4">
          <button type="button" class="btn btn-ghost" onclick="document.getElementById(<%= "report-modal-#{suspect.class.name.downcase}-#{suspect.id}".to_json %>).close()">
            Cancel
          </button>
          <%= f.submit "Submit", class: "btn btn-error text-white" %>
        </div>
      <% end %>
    </div>
  </dialog>
<% end %>
